var riseupInterval=setInterval("NTDanGuanPlugin.riseup()",3000);var NTDanGuanPlugin={baseUrl:"http://9cai.cn/game",dgwrapper:$(".ntdgwrapper"),tab:$(".dgtab-two"),content:$(".dgcontent"),curMatch:".dgcurmatch",betitem:".dgbetitem",price:".dgcurmatch .dgprice",betchange:".dgmultiple span",betnums:".dgmultiple input",init:function(){if(NTDanGuanPlugin.dgwrapper!=null){for(var a=0;a<NTDanGuanPlugin.dgwrapper.length;a++){this.load(a)}}},load:function(a){var b=window.location.host+window.location.pathname;$.ajax({url:"http://gc.3g.cn/gcdata/ClientHandle.ashx",data:{fid:8920,url:b,pos:a},dataType:"jsonp",success:function(k){console.log(k);var l="";if(k!=null&&k!=false){if(k.Match!=null){var o=k.Match;o.HomeTeam=o.HomeTeam.replace(/ /g,"");o.GuestTeam=o.GuestTeam.replace(/ /g,"");var g=NTDanGuanPlugin.getBetPer(k.GameName,k.Detail,k.Match);var r=g[0];var f=g[1];var c=g[2];var h=g[3];var j=NTDanGuanPlugin.getMin(c);var q=NTDanGuanPlugin.getMax(f);var i=0;var e=0,n=0,p=0;if(f[0]==q){e++}if(f[1]==q){n++}if(f[2]==q){p++}if(c[2]==j){p++}if(c[1]==j){n++}if(c[0]==j){e++}if(e==2){i=0}else{if(n==2){i=1}else{if(p==2){i=2}else{if(e==1){i=0}else{if(n==1){i=1}else{if(p==1){i=2}}}}}}l+='<div class="dgmatch">';l+='<div class="dginfo">';l+='<img src="http://res.3g.cn/images/pms/ntplugin/icon_1.png" alt="足球icon"/><h1>'+o.HomeTeam+'<b class="dgcur">VS</b> '+o.GuestTeam+'<span class="dglighttext">'+NTDanGuanPlugin.dateFormat(o.Issue)+o.League+"</span>";l+='<span class="dgmore dgdarktext"><a href="http://9cai.cn/game/jingzu.html">更多比赛>></a></span><div class="dgclearfix"></div></h1>';l+="</div>";l+='<ul class="dgbet">';l+='<li class="dgwin">';l+="<ul>";l+='<li class="dgrate">';l+="<p>";l+='<span class="dgratenum">'+f[0]+"支持</span>";l+='<span class="dgrateimg" style="height: '+NTDanGuanPlugin.countRateHeight(f[0])+'px" ><span class="dgorangetext">+1</span>';l+="</span>";l+="</p>";l+='</li><li class="dgbetitem'+(0==i?" dgcur":"")+'" '+((o.HomeTeam.length>=4||o.GuestTeam.length>=4)?'style="font-size:0.9em;"':"")+"  "+(k.GameName=="Sporttrey312"?('data-index="'+h[0]+'"'):"")+">";l+=r[0];l+='</li><li class="dgreferodds dgdarktext">';l+="赔率:<span>"+c[0]+"</span>";l+="</li>";l+="</ul>";l+='</li><li class="dgdraws">';l+="<ul>";l+='<li class="dgrate">';l+="<p>";l+='<span class="dgratenum">'+f[1]+"支持</span>";l+='<span class="dgrateimg" style="height: '+NTDanGuanPlugin.countRateHeight(f[1])+'px" ><span class="dgorangetext">+1</span>';l+="</span>";l+="</p>";l+='</li><li class="dgbetitem'+(1==i?" dgcur":"")+'"  '+(k.GameName=="Sporttrey312"?('data-index="'+h[1]+'"'):"")+">";l+=r[1];l+='</li><li class="dgreferodds dgdarktext">';l+="赔率:<span>"+c[1]+"</span>";l+="</li>";l+="</ul>";l+='</li><li class="dgdefeat">';l+="<ul>";l+='<li class="dgrate">';l+="<p>";l+='<span class="dgratenum">'+f[2]+"支持</span>";l+='<span class="dgrateimg" style="height: '+NTDanGuanPlugin.countRateHeight(f[2])+'px" ><span class="dgorangetext">+1</span>';l+="</span>";l+="</p>";l+='</li><li class="dgbetitem'+(2==i?" dgcur":"")+'" '+((o.HomeTeam.length>=4||o.GuestTeam.length>=4)?'style="font-size:0.9em;"':"")+"  "+(k.GameName=="Sporttrey312"?('data-index="'+h[2]+'"'):"")+">";l+=r[2];l+='</li><li class="dgreferodds dgdarktext">';l+="赔率:<span>"+c[2]+"</span>";l+="</li>";l+="</ul>";l+="</li>";l+="</ul>";l+='<div class="dgpay">';l+='<div class="dgmultiple"><span class="dgminus">';l+="-";l+='</span><input type="text" class="dgnums dgdarktext" value="100"/><span class="dgadd">';l+="+";l+="</span>元</div>";l+='<div id="zqbuy'+o.Issue+'" class="dgbuy dgyellow-button" data-source="'+k.SourceId+'">立即购买</div>';l+='<div class="dgmoneycount">';l+='<span>奖金:<b class="dgprice">0</b>元</span>';l+="</div>";l+="</div>";l+="</div>"}else{if(k.nbaMatch!=null){l+='<div class="dgmatch dgnotice">抱歉，该玩法暂未开售</div>'}}if(k.nbaMatch!=null){var m=k.nbaMatch;m.HomeTeam=m.HomeTeam.replace(/ /g,"");m.GuestTeam=m.GuestTeam.replace(/ /g,"");var g=NTDanGuanPlugin.getBetPer(k.nbaGameName,k.nbaDetail,k.nbaMatch);var r=g[0];var f=g[1];var c=g[2];var j=NTDanGuanPlugin.getMin(c);var q=NTDanGuanPlugin.getMax(f);var h=g[3];var i=0;var e=0,n=0;if(f[0]==q){e++}if(f[1]==q){n++}if(c[1]==j){n++}if(c[0]==j){e++}if(e==2){i=0}else{if(n==2){i=1}else{if(e==1){i=0}else{if(n==1){i=1}}}}l+='<div class="dgmatch dgnbamatch">';l+='<div class="dginfo">';l+='<img src="http://res.3g.cn/images/pms/ntplugin/icon_2.png" alt="篮球icon"/><h1>'+m.HomeTeam+'<b class="dgcur">VS</b> '+m.GuestTeam+'<span class="dglighttext">'+NTDanGuanPlugin.dateFormat(m.Issue)+m.League+"</span>";l+='<span class="dgmore dgdarktext"><a href="http://9cai.cn/game/jinglan.html">更多比赛>></a></span><div class="dgclearfix"></div></h1>';l+="</div>";l+='<ul class="dgbet">';l+='<li class="dgwin">';l+="<ul>";l+='<li class="dgrate">';l+="<p>";l+='<span class="dgratenum">'+f[0]+"支持</span>";l+='<span class="dgrateimg" style="height: '+NTDanGuanPlugin.countRateHeight(f[0])+'px" ><span class="dgorangetext">+1</span>';l+="</span>";l+="</p>";l+='</li><li class="dgbetitem'+(0==i?" dgcur":"")+'" '+((m.HomeTeam.length>=4||m.GuestTeam.length>=4)?'style="font-size:0.9em;"':"")+"  "+(k.nbaGameName=="Sporttrey318"?('data-index="'+h[0]+'"'):"")+">";
    l+=r[0];l+='</li><li class="dgreferodds dgdarktext">';l+="赔率:<span>"+c[0]+"</span>";l+="</li>";l+="</ul>";l+='</li><li class="dgdefeat">';l+="<ul>";l+='<li class="dgrate">';l+="<p>";l+='<span class="dgratenum">'+f[1]+"支持</span>";l+='<span class="dgrateimg" style="height: '+NTDanGuanPlugin.countRateHeight(f[1])+'px" ><span class="dgorangetext">+1</span>';l+="</span>";l+="</p>";l+='</li><li class="dgbetitem'+(1==i?" dgcur":"")+'" '+((m.HomeTeam.length>=4||m.GuestTeam.length>=4)?'style="font-size:0.9em;"':"")+"  "+(k.nbaGameName=="Sporttrey318"?('data-index="'+h[1]+'"'):"")+">";l+=r[1];l+='</li><li class="dgreferodds dgdarktext">';l+="赔率:<span>"+c[1]+"</span>";l+="</li>";l+="</ul>";l+="</li>";l+="</ul>";l+='<div class="dgpay">';l+='<div class="dgmultiple"><span class="dgminus">';l+="-";l+='</span><input type="text" class="dgnums dgdarktext" value="100"/><span class="dgadd">';l+="+";l+="</span>元</div>";l+='<div id="lqbuy'+m.Issue+'" class="dgbuy dgyellow-button" data-source="'+k.SourceId+'">立即购买</div>';l+='<div class="dgmoneycount">';l+='<span>奖金:<b class="dgprice">0</b>元</span>';l+="";l+="</div>";l+="</div>";l+="</div>"}else{if(l!=""){l+='<div class="dgmatch dgnotice">抱歉，该玩法暂未开售</div>'}}if(l!=""){$(NTDanGuanPlugin.dgwrapper).eq(a).find(".dgcontent").html(l);var d=0;switch(k.GameType){case 0:if(k.Match==null&&k.nbaMatch!=null){d=1}break;case 1:if(k.nbaMatch!=null){d=1}break}NTDanGuanPlugin.switchTab(d,a);NTDanGuanPlugin.countMoney(a);NTDanGuanPlugin.bindEvent(k,a)}else{$(NTDanGuanPlugin.dgwrapper).eq(a).hide()}}else{$(NTDanGuanPlugin.dgwrapper).eq(a).hide()}},error:function(){$(NTDanGuanPlugin.dgwrapper).eq(a).hide()}})},riseup:function(a){var c=$(NTDanGuanPlugin.dgwrapper).eq(a).find(NTDanGuanPlugin.curMatch).find("ul.dgbet>li").length;var b=Math.floor(Math.random()*c);$(NTDanGuanPlugin.dgwrapper).eq(a).find(NTDanGuanPlugin.curMatch).find("ul.dgbet li .dgrateimg span").removeClass("riseup");$(NTDanGuanPlugin.dgwrapper).eq(a).find(NTDanGuanPlugin.curMatch).find("ul.dgbet li .dgrateimg span").eq(b).addClass("riseup")},riseupTimer:function(a){riseupInterval=setInterval("NTDanGuanPlugin.riseup("+a+")",3000)},countMoney:function(b){var a=$(NTDanGuanPlugin.dgwrapper).eq(b).find(NTDanGuanPlugin.curMatch).find(".dgbet .dgcur");var g=$(NTDanGuanPlugin.dgwrapper).eq(b).find(NTDanGuanPlugin.curMatch).find(".dgnums").val();var c=0;var f=0;for(var d=0;d<a.length;d++){var h=a[d];var j=$(h).next().find("span").html();var e=j*g/a.length;if(c==0||(c>0&&e<c)){c=e}if(f==0||(f>0&&e>f)){f=e}}if(f>c){$(NTDanGuanPlugin.dgwrapper).eq(b).find(NTDanGuanPlugin.price).html(c.toFixed(2)+"～"+f.toFixed(2))}else{$(NTDanGuanPlugin.dgwrapper).eq(b).find(NTDanGuanPlugin.price).html(c.toFixed(2))}},switchTab:function(b,a){if(b!=0&&b!=1){b=0}$(NTDanGuanPlugin.dgwrapper).eq(a).find(".dgtab-two").find("li").removeClass("dgcur");$(NTDanGuanPlugin.dgwrapper).eq(a).find(".dgtab-two").find("li").eq(b).addClass("dgcur");$(NTDanGuanPlugin.dgwrapper).eq(a).find(".dgcontent").find(".dgmatch").removeClass("dgcurmatch").hide();$(NTDanGuanPlugin.dgwrapper).eq(a).find(".dgcontent").find(".dgmatch").eq(b).addClass("dgcurmatch").show();clearInterval(riseupInterval);NTDanGuanPlugin.riseupTimer(a);NTDanGuanPlugin.countMoney(a)},dateFormat:function(a){a=a.toString();return"周"+"一二三四五六日".charAt(+a.charAt(8)-1)+a.substr(9)},getBetPer:function(e,k,h){var p=[];var b=[];var a=[];var n=[];switch(e){case"Sporttrey311":b=k.BiliRQ.split("|");a=h.OddsList[0].split("|");p=[h.HomeTeam+"胜["+h.Concede+"]","平",h.GuestTeam+"胜"];break;case"Sporttrey312":b=k.BiliNoRQ.split("|");var f=h.OddsList[1].split("|");var j=NTDanGuanPlugin.getFtBFMin(f);a=[j[0][1],j[1][1],j[2][1]];p=[h.HomeTeam+j[0][2],"平"+j[1][2],h.GuestTeam+j[2][2]];n=[j[0][0],j[1][0],j[2][0]];break;case"Sporttrey321":b=k.BiliNoRQ.split("|");a=h.OddsList[4].split("|");p=[h.HomeTeam+"胜","平",h.GuestTeam+"胜"];break;case"Sporttrey316":if(k.BiliRQ!=null){b=k.BiliRQ.split("|")}else{b=k.BiliNoRQ.split("|")}a=h.OddsList[0].split("|");p=[h.HomeTeam+"胜["+h.Concede+"]",h.GuestTeam+"胜"];break;case"Sporttrey319":b=k.BiliNoRQ.split("|");a=h.OddsList[3].split("|");p=["大分["+h.Concede+"]","小分"];break;case"Sporttrey318":b=k.BiliNoRQ.split("|");var c=h.OddsList[2].split("|");var m=[];var d=[];for(var g=0;g<c.length;g++){if(g<6){d.push(c[g])}else{m.push(c[g])}}var o=NTDanGuanPlugin.getNbaSFCMin(m);var l=NTDanGuanPlugin.getNbaSFCMin(d);a=[o[1],l[1]];n=[o[2]+6,l[2]];p=[h.HomeTeam+"胜"+o[0]+"分",h.GuestTeam+"胜"+l[0]+"分"];break}for(var g=0;g<b.length;g++){if("--"==b[g]){if(3==b.length){if(g==0){b[g]="33%"}else{if(g==1){b[g]="15%"}else{b[g]="52%"}}}else{if(g==0){b[g]="47%"}else{b[g]="53%"}}}}if(b.length<=1){if(e=="Sporttrey311"||e=="Sporttrey312"||e=="Sporttrey321"){b[0]="33%";b[1]="15%";b[2]="52%"}else{b[0]="47%";b[1]="53%"}}return[p,b,a,n]},getMin:function(a){var b=0;for(var c=0;c<a.length;c++){if(a[c]<b||b==0){b=a[c]}}return b},getMax:function(a){var b=0;for(var c=0;c<a.length;c++){if(a[c]>b||b==0){b=a[c]}}return b},getNbaSFCMin:function(a){var c=0;
    var b=0;var e="";for(var d=0;d<a.length;d++){if(a[d]<b||b==0){c=d;b=+a[d]}}switch(c){case 0:e="1～5";break;case 1:e="6～10";break;case 2:e="11～15";break;case 3:e="16～20";break;case 4:e="21～25";break;case 5:e="26+";break}return[e,b,c]},getFtBFMin:function(a){var c=0;var b=0;var f="";var e=[];for(var d=0;d<a.length;d++){if((a[d]<b||b==0)&&d!=0&&d!=13&&d!=18){c=d;b=+a[d]}if(d==12||d==17||d==(a.length-1)){f=NTDanGuanPlugin.getBF(c);e.push([c,b,f]);b=0}}return e},getBF:function(a){var b="";switch(a){case 0:b="胜其他";break;case 1:b="1:0";break;case 2:b="2:0";break;case 3:b="2:1";break;case 4:b="3:0";break;case 5:b="3:1";break;case 6:b="3:2";break;case 7:b="4:0";break;case 8:b="4:1";break;case 9:b="4:2";break;case 10:b="5:0";break;case 11:b="5:1";break;case 12:b="5:2";break;case 13:b="平其他";break;case 14:b="0:0";break;case 15:b="1:1";break;case 16:b="2:2";break;case 17:b="3:3";break;case 18:b="负其他";break;case 19:b="0:1";break;case 20:b="0:2";break;case 21:b="1:2";break;case 22:b="0:3";break;case 23:b="1:3";break;case 24:b="2:3";break;case 25:b="0:4";break;case 26:b="1:4";break;case 27:b="2:4";break;case 28:b="0:5";break;case 29:b="1:5";break;case 30:b="2:5";break}return b},countRateHeight:function(a){var b=a.replace("%","");return b*0.01*63},switchGameCode:function(a){switch(a){case"Sporttrey311":return 19;case"Sporttrey321":return 39;case"Sporttrey312":return 21;case"Sporttrey316":return 27;case"Sporttrey319":return 33;case"Sporttrey318":return 31;default:return 39}},bindEvent:function(b,a){$(NTDanGuanPlugin.dgwrapper).eq(a).find(NTDanGuanPlugin.tab).on("click",function(f){var d=f.target;var c=$(d).index();NTDanGuanPlugin.switchTab(c,a)});$(NTDanGuanPlugin.dgwrapper).eq(a).find(NTDanGuanPlugin.betitem).on("click",function(g){var d=g.target;var c=+$(NTDanGuanPlugin.dgwrapper).eq(a).find(NTDanGuanPlugin.curMatch).find(".dgbet .dgcur").length;var f=+$(NTDanGuanPlugin.dgwrapper).eq(a).find(NTDanGuanPlugin.curMatch).find(".dgnums").val();if($(d).hasClass("dgcur")){if(c>=1){f=f-f/c}else{f=0}}else{if(c>=1){f=f+f/c}else{f=100}}$(NTDanGuanPlugin.dgwrapper).eq(a).find(NTDanGuanPlugin.curMatch).find(".dgnums").val(f);$(d).toggleClass("dgcur");NTDanGuanPlugin.countMoney(a)});$(NTDanGuanPlugin.dgwrapper).eq(a).find(NTDanGuanPlugin.betchange).on("click",function(h){var d=h.target;var f=d.className;var g=$(d).parent().find(".dgnums").val();var c=+$(NTDanGuanPlugin.dgwrapper).eq(a).find(NTDanGuanPlugin.curMatch).find(".dgbet .dgcur").length*2;switch(f){case"dgminus":if(g>c){g=g-c}else{g=c}break;case"dgadd":g=+g+c;break}$(d).parent().find(".dgnums").val(g);NTDanGuanPlugin.countMoney(a)});$(NTDanGuanPlugin.dgwrapper).eq(a).find(NTDanGuanPlugin.betnums).on("change",function(g){var d=g.target;var f=$(d).val();var c=+$(NTDanGuanPlugin.dgwrapper).eq(a).find(NTDanGuanPlugin.curMatch).find(".dgbet .dgcur").length*2;if(f==0){$(d).val(c)}else{if(f%2>0){$(d).val(+f+1)}}NTDanGuanPlugin.countMoney(a)});if(b.Match!=null){$("#zqbuy"+b.Match.Issue).on("click",function(l){var n=l.target;var d=NTDanGuanPlugin.baseUrl+"/jingzu.html?ct=1&p=1&bet=1&gameCode="+NTDanGuanPlugin.switchGameCode(b.GameName);var f=$(NTDanGuanPlugin.dgwrapper).eq(a).find(NTDanGuanPlugin.curMatch).find(".dgbet .dgcur");if(b.GameName=="Sporttrey312"){var c="";for(var h=0;h<f.length;h++){c+=f[h].dataset.index+","}d+="&codes="+b.Match.Issue+":"+c.substring(0,c.length-1)}else{var k=0;var g=0;var j=0;for(var h=0;h<f.length;h++){switch($(f[h]).parent().parent().attr("class")){case"dgwin":k=1;break;case"dgdraws":g=1;break;case"dgdefeat":j=1;break}}d+="&codes="+b.Match.Issue+":"+k+","+g+","+j}d+="&sourceid="+n.dataset.source;var m=($(NTDanGuanPlugin.dgwrapper).eq(a).find(NTDanGuanPlugin.curMatch).find(".dgnums").val())/(2*f.length);d+="&beishu="+m;if(m<=0||f.length<=0){alert("请至少选择一个赛果")}else{window.location.href=d}})}if(b.nbaMatch!=null){$("#lqbuy"+b.nbaMatch.Issue).on("click",function(k){var m=k.target;var d=NTDanGuanPlugin.baseUrl+"/jinglan.html?ct=1&p=1&bet=1&gameCode="+NTDanGuanPlugin.switchGameCode(b.nbaGameName);var f=$(NTDanGuanPlugin.dgwrapper).eq(a).find(NTDanGuanPlugin.curMatch).find(".dgbet .dgcur");if(b.nbaGameName=="Sporttrey318"){var c="";for(var g=0;g<f.length;g++){c+=f[g].dataset.index+","}d+="&codes="+b.nbaMatch.Issue+":"+c.substring(0,c.length-1)}else{var j=0;var h=0;for(var g=0;g<f.length;g++){switch($(f[g]).parent().parent().attr("class")){case"dgwin":j=1;break;case"dgdefeat":h=1;break}}d+="&codes="+b.nbaMatch.Issue+":"+j+","+h}d+="&sourceid="+m.dataset.source;var l=($(NTDanGuanPlugin.dgwrapper).eq(a).find(NTDanGuanPlugin.curMatch).find(".dgnums").val())/(2*f.length);d+="&beishu="+l;if(l<=0||f.length<=0){alert("请至少选择一个赛果")}else{window.location.href=d}})}}};NTDanGuanPlugin.init();var riseupInterval=setInterval("NTDanGuanPlugin.riseup()",3000);var NTDanGuanPlugin={baseUrl:"http://9cai.cn/game",dgwrapper:$(".ntdgwrapper"),tab:$(".dgtab-two"),content:$(".dgcontent"),curMatch:".dgcurmatch",betitem:".dgbetitem",price:".dgcurmatch .dgprice",betchange:".dgmultiple span",betnums:".dgmultiple input",init:function(){if(NTDanGuanPlugin.dgwrapper!=null){for(var a=0;
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            a<NTDanGuanPlugin.dgwrapper.length;a++){this.load(a)}}},load:function(a){var b=window.location.host+window.location.pathname;$.ajax({url:"http://gc.3g.cn/gcdata/ClientHandle.ashx",data:{fid:8920,url:b,pos:a},dataType:"jsonp",success:function(k){console.log(k);var l="";if(k!=null&&k!=false){if(k.Match!=null){var o=k.Match;o.HomeTeam=o.HomeTeam.replace(/ /g,"");o.GuestTeam=o.GuestTeam.replace(/ /g,"");var g=NTDanGuanPlugin.getBetPer(k.GameName,k.Detail,k.Match);var r=g[0];var f=g[1];var c=g[2];var h=g[3];var j=NTDanGuanPlugin.getMin(c);var q=NTDanGuanPlugin.getMax(f);var i=0;var e=0,n=0,p=0;if(f[0]==q){e++}if(f[1]==q){n++}if(f[2]==q){p++}if(c[2]==j){p++}if(c[1]==j){n++}if(c[0]==j){e++}if(e==2){i=0}else{if(n==2){i=1}else{if(p==2){i=2}else{if(e==1){i=0}else{if(n==1){i=1}else{if(p==1){i=2}}}}}}l+='<div class="dgmatch">';l+='<div class="dginfo">';l+='<img src="http://res.3g.cn/images/pms/ntplugin/icon_1.png" alt="足球icon"/><h1>'+o.HomeTeam+'<b class="dgcur">VS</b> '+o.GuestTeam+'<span class="dglighttext">'+NTDanGuanPlugin.dateFormat(o.Issue)+o.League+"</span>";l+='<span class="dgmore dgdarktext"><a href="http://9cai.cn/game/jingzu.html">更多比赛>></a></span><div class="dgclearfix"></div></h1>';l+="</div>";l+='<ul class="dgbet">';l+='<li class="dgwin">';l+="<ul>";l+='<li class="dgrate">';l+="<p>";l+='<span class="dgratenum">'+f[0]+"支持</span>";l+='<span class="dgrateimg" style="height: '+NTDanGuanPlugin.countRateHeight(f[0])+'px" ><span class="dgorangetext">+1</span>';l+="</span>";l+="</p>";l+='</li><li class="dgbetitem'+(0==i?" dgcur":"")+'" '+((o.HomeTeam.length>=4||o.GuestTeam.length>=4)?'style="font-size:0.9em;"':"")+"  "+(k.GameName=="Sporttrey312"?('data-index="'+h[0]+'"'):"")+">";l+=r[0];l+='</li><li class="dgreferodds dgdarktext">';l+="赔率:<span>"+c[0]+"</span>";l+="</li>";l+="</ul>";l+='</li><li class="dgdraws">';l+="<ul>";l+='<li class="dgrate">';l+="<p>";l+='<span class="dgratenum">'+f[1]+"支持</span>";l+='<span class="dgrateimg" style="height: '+NTDanGuanPlugin.countRateHeight(f[1])+'px" ><span class="dgorangetext">+1</span>';l+="</span>";l+="</p>";l+='</li><li class="dgbetitem'+(1==i?" dgcur":"")+'"  '+(k.GameName=="Sporttrey312"?('data-index="'+h[1]+'"'):"")+">";l+=r[1];l+='</li><li class="dgreferodds dgdarktext">';l+="赔率:<span>"+c[1]+"</span>";l+="</li>";l+="</ul>";l+='</li><li class="dgdefeat">';l+="<ul>";l+='<li class="dgrate">';l+="<p>";l+='<span class="dgratenum">'+f[2]+"支持</span>";l+='<span class="dgrateimg" style="height: '+NTDanGuanPlugin.countRateHeight(f[2])+'px" ><span class="dgorangetext">+1</span>';l+="</span>";l+="</p>";l+='</li><li class="dgbetitem'+(2==i?" dgcur":"")+'" '+((o.HomeTeam.length>=4||o.GuestTeam.length>=4)?'style="font-size:0.9em;"':"")+"  "+(k.GameName=="Sporttrey312"?('data-index="'+h[2]+'"'):"")+">";l+=r[2];l+='</li><li class="dgreferodds dgdarktext">';l+="赔率:<span>"+c[2]+"</span>";l+="</li>";l+="</ul>";l+="</li>";l+="</ul>";l+='<div class="dgpay">';l+='<div class="dgmultiple"><span class="dgminus">';l+="-";l+='</span><input type="text" class="dgnums dgdarktext" value="100"/><span class="dgadd">';l+="+";l+="</span>元</div>";l+='<div id="zqbuy'+o.Issue+'" class="dgbuy dgyellow-button" data-source="'+k.SourceId+'">立即购买</div>';l+='<div class="dgmoneycount">';l+='<span>奖金:<b class="dgprice">0</b>元</span>';l+="</div>";l+="</div>";l+="</div>"}else{if(k.nbaMatch!=null){l+='<div class="dgmatch dgnotice">抱歉，该玩法暂未开售</div>'}}if(k.nbaMatch!=null){var m=k.nbaMatch;m.HomeTeam=m.HomeTeam.replace(/ /g,"");m.GuestTeam=m.GuestTeam.replace(/ /g,"");var g=NTDanGuanPlugin.getBetPer(k.nbaGameName,k.nbaDetail,k.nbaMatch);var r=g[0];var f=g[1];var c=g[2];var j=NTDanGuanPlugin.getMin(c);var q=NTDanGuanPlugin.getMax(f);var h=g[3];var i=0;var e=0,n=0;if(f[0]==q){e++}if(f[1]==q){n++}if(c[1]==j){n++}if(c[0]==j){e++}if(e==2){i=0}else{if(n==2){i=1}else{if(e==1){i=0}else{if(n==1){i=1}}}}l+='<div class="dgmatch dgnbamatch">';l+='<div class="dginfo">';l+='<img src="http://res.3g.cn/images/pms/ntplugin/icon_2.png" alt="篮球icon"/><h1>'+m.HomeTeam+'<b class="dgcur">VS</b> '+m.GuestTeam+'<span class="dglighttext">'+NTDanGuanPlugin.dateFormat(m.Issue)+m.League+"</span>";l+='<span class="dgmore dgdarktext"><a href="http://9cai.cn/game/jinglan.html">更多比赛>></a></span><div class="dgclearfix"></div></h1>';l+="</div>";l+='<ul class="dgbet">';l+='<li class="dgwin">';l+="<ul>";l+='<li class="dgrate">';l+="<p>";l+='<span class="dgratenum">'+f[0]+"支持</span>";l+='<span class="dgrateimg" style="height: '+NTDanGuanPlugin.countRateHeight(f[0])+'px" ><span class="dgorangetext">+1</span>';l+="</span>";l+="</p>";l+='</li><li class="dgbetitem'+(0==i?" dgcur":"")+'" '+((m.HomeTeam.length>=4||m.GuestTeam.length>=4)?'style="font-size:0.9em;"':"")+"  "+(k.nbaGameName=="Sporttrey318"?('data-index="'+h[0]+'"'):"")+">";l+=r[0];l+='</li><li class="dgreferodds dgdarktext">';l+="赔率:<span>"+c[0]+"</span>";l+="</li>";l+="</ul>";l+='</li><li class="dgdefeat">';l+="<ul>";l+='<li class="dgrate">';l+="<p>";l+='<span class="dgratenum">'+f[1]+"支持</span>";
    l+='<span class="dgrateimg" style="height: '+NTDanGuanPlugin.countRateHeight(f[1])+'px" ><span class="dgorangetext">+1</span>';l+="</span>";l+="</p>";l+='</li><li class="dgbetitem'+(1==i?" dgcur":"")+'" '+((m.HomeTeam.length>=4||m.GuestTeam.length>=4)?'style="font-size:0.9em;"':"")+"  "+(k.nbaGameName=="Sporttrey318"?('data-index="'+h[1]+'"'):"")+">";l+=r[1];l+='</li><li class="dgreferodds dgdarktext">';l+="赔率:<span>"+c[1]+"</span>";l+="</li>";l+="</ul>";l+="</li>";l+="</ul>";l+='<div class="dgpay">';l+='<div class="dgmultiple"><span class="dgminus">';l+="-";l+='</span><input type="text" class="dgnums dgdarktext" value="100"/><span class="dgadd">';l+="+";l+="</span>元</div>";l+='<div id="lqbuy'+m.Issue+'" class="dgbuy dgyellow-button" data-source="'+k.SourceId+'">立即购买</div>';l+='<div class="dgmoneycount">';l+='<span>奖金:<b class="dgprice">0</b>元</span>';l+="";l+="</div>";l+="</div>";l+="</div>"}else{if(l!=""){l+='<div class="dgmatch dgnotice">抱歉，该玩法暂未开售</div>'}}if(l!=""){$(NTDanGuanPlugin.dgwrapper).eq(a).find(".dgcontent").html(l);var d=0;switch(k.GameType){case 0:if(k.Match==null&&k.nbaMatch!=null){d=1}break;case 1:if(k.nbaMatch!=null){d=1}break}NTDanGuanPlugin.switchTab(d,a);NTDanGuanPlugin.countMoney(a);NTDanGuanPlugin.bindEvent(k,a)}else{$(NTDanGuanPlugin.dgwrapper).eq(a).hide()}}else{$(NTDanGuanPlugin.dgwrapper).eq(a).hide()}},error:function(){$(NTDanGuanPlugin.dgwrapper).eq(a).hide()}})},riseup:function(a){var c=$(NTDanGuanPlugin.dgwrapper).eq(a).find(NTDanGuanPlugin.curMatch).find("ul.dgbet>li").length;var b=Math.floor(Math.random()*c);$(NTDanGuanPlugin.dgwrapper).eq(a).find(NTDanGuanPlugin.curMatch).find("ul.dgbet li .dgrateimg span").removeClass("riseup");$(NTDanGuanPlugin.dgwrapper).eq(a).find(NTDanGuanPlugin.curMatch).find("ul.dgbet li .dgrateimg span").eq(b).addClass("riseup")},riseupTimer:function(a){riseupInterval=setInterval("NTDanGuanPlugin.riseup("+a+")",3000)},countMoney:function(b){var a=$(NTDanGuanPlugin.dgwrapper).eq(b).find(NTDanGuanPlugin.curMatch).find(".dgbet .dgcur");var g=$(NTDanGuanPlugin.dgwrapper).eq(b).find(NTDanGuanPlugin.curMatch).find(".dgnums").val();var c=0;var f=0;for(var d=0;d<a.length;d++){var h=a[d];var j=$(h).next().find("span").html();var e=j*g/a.length;if(c==0||(c>0&&e<c)){c=e}if(f==0||(f>0&&e>f)){f=e}}if(f>c){$(NTDanGuanPlugin.dgwrapper).eq(b).find(NTDanGuanPlugin.price).html(c.toFixed(2)+"～"+f.toFixed(2))}else{$(NTDanGuanPlugin.dgwrapper).eq(b).find(NTDanGuanPlugin.price).html(c.toFixed(2))}},switchTab:function(b,a){if(b!=0&&b!=1){b=0}$(NTDanGuanPlugin.dgwrapper).eq(a).find(".dgtab-two").find("li").removeClass("dgcur");$(NTDanGuanPlugin.dgwrapper).eq(a).find(".dgtab-two").find("li").eq(b).addClass("dgcur");$(NTDanGuanPlugin.dgwrapper).eq(a).find(".dgcontent").find(".dgmatch").removeClass("dgcurmatch").hide();$(NTDanGuanPlugin.dgwrapper).eq(a).find(".dgcontent").find(".dgmatch").eq(b).addClass("dgcurmatch").show();clearInterval(riseupInterval);NTDanGuanPlugin.riseupTimer(a);NTDanGuanPlugin.countMoney(a)},dateFormat:function(a){a=a.toString();return"周"+"一二三四五六日".charAt(+a.charAt(8)-1)+a.substr(9)},getBetPer:function(e,k,h){var p=[];var b=[];var a=[];var n=[];switch(e){case"Sporttrey311":b=k.BiliRQ.split("|");a=h.OddsList[0].split("|");p=[h.HomeTeam+"胜["+h.Concede+"]","平",h.GuestTeam+"胜"];break;case"Sporttrey312":b=k.BiliNoRQ.split("|");var f=h.OddsList[1].split("|");var j=NTDanGuanPlugin.getFtBFMin(f);a=[j[0][1],j[1][1],j[2][1]];p=[h.HomeTeam+j[0][2],"平"+j[1][2],h.GuestTeam+j[2][2]];n=[j[0][0],j[1][0],j[2][0]];break;case"Sporttrey321":b=k.BiliNoRQ.split("|");a=h.OddsList[4].split("|");p=[h.HomeTeam+"胜","平",h.GuestTeam+"胜"];break;case"Sporttrey316":if(k.BiliRQ!=null){b=k.BiliRQ.split("|")}else{b=k.BiliNoRQ.split("|")}a=h.OddsList[0].split("|");p=[h.HomeTeam+"胜["+h.Concede+"]",h.GuestTeam+"胜"];break;case"Sporttrey319":b=k.BiliNoRQ.split("|");a=h.OddsList[3].split("|");p=["大分["+h.Concede+"]","小分"];break;case"Sporttrey318":b=k.BiliNoRQ.split("|");var c=h.OddsList[2].split("|");var m=[];var d=[];for(var g=0;g<c.length;g++){if(g<6){d.push(c[g])}else{m.push(c[g])}}var o=NTDanGuanPlugin.getNbaSFCMin(m);var l=NTDanGuanPlugin.getNbaSFCMin(d);a=[o[1],l[1]];n=[o[2]+6,l[2]];p=[h.HomeTeam+"胜"+o[0]+"分",h.GuestTeam+"胜"+l[0]+"分"];break}for(var g=0;g<b.length;g++){if("--"==b[g]){if(3==b.length){if(g==0){b[g]="33%"}else{if(g==1){b[g]="15%"}else{b[g]="52%"}}}else{if(g==0){b[g]="47%"}else{b[g]="53%"}}}}if(b.length<=1){if(e=="Sporttrey311"||e=="Sporttrey312"||e=="Sporttrey321"){b[0]="33%";b[1]="15%";b[2]="52%"}else{b[0]="47%";b[1]="53%"}}return[p,b,a,n]},getMin:function(a){var b=0;for(var c=0;c<a.length;c++){if(a[c]<b||b==0){b=a[c]}}return b},getMax:function(a){var b=0;for(var c=0;c<a.length;c++){if(a[c]>b||b==0){b=a[c]}}return b},getNbaSFCMin:function(a){var c=0;var b=0;var e="";for(var d=0;d<a.length;d++){if(a[d]<b||b==0){c=d;b=+a[d]}}switch(c){case 0:e="1～5";break;case 1:e="6～10";break;case 2:e="11～15";break;case 3:e="16～20";break;case 4:e="21～25";break;case 5:e="26+";break}return[e,b,c]
},getFtBFMin:function(a){var c=0;var b=0;var f="";var e=[];for(var d=0;d<a.length;d++){if((a[d]<b||b==0)&&d!=0&&d!=13&&d!=18){c=d;b=+a[d]}if(d==12||d==17||d==(a.length-1)){f=NTDanGuanPlugin.getBF(c);e.push([c,b,f]);b=0}}return e},getBF:function(a){var b="";switch(a){case 0:b="胜其他";break;case 1:b="1:0";break;case 2:b="2:0";break;case 3:b="2:1";break;case 4:b="3:0";break;case 5:b="3:1";break;case 6:b="3:2";break;case 7:b="4:0";break;case 8:b="4:1";break;case 9:b="4:2";break;case 10:b="5:0";break;case 11:b="5:1";break;case 12:b="5:2";break;case 13:b="平其他";break;case 14:b="0:0";break;case 15:b="1:1";break;case 16:b="2:2";break;case 17:b="3:3";break;case 18:b="负其他";break;case 19:b="0:1";break;case 20:b="0:2";break;case 21:b="1:2";break;case 22:b="0:3";break;case 23:b="1:3";break;case 24:b="2:3";break;case 25:b="0:4";break;case 26:b="1:4";break;case 27:b="2:4";break;case 28:b="0:5";break;case 29:b="1:5";break;case 30:b="2:5";break}return b},countRateHeight:function(a){var b=a.replace("%","");return b*0.01*63},switchGameCode:function(a){switch(a){case"Sporttrey311":return 19;case"Sporttrey321":return 39;case"Sporttrey312":return 21;case"Sporttrey316":return 27;case"Sporttrey319":return 33;case"Sporttrey318":return 31;default:return 39}},bindEvent:function(b,a){$(NTDanGuanPlugin.dgwrapper).eq(a).find(NTDanGuanPlugin.tab).on("click",function(f){var d=f.target;var c=$(d).index();NTDanGuanPlugin.switchTab(c,a)});$(NTDanGuanPlugin.dgwrapper).eq(a).find(NTDanGuanPlugin.betitem).on("click",function(g){var d=g.target;var c=+$(NTDanGuanPlugin.dgwrapper).eq(a).find(NTDanGuanPlugin.curMatch).find(".dgbet .dgcur").length;var f=+$(NTDanGuanPlugin.dgwrapper).eq(a).find(NTDanGuanPlugin.curMatch).find(".dgnums").val();if($(d).hasClass("dgcur")){if(c>=1){f=f-f/c}else{f=0}}else{if(c>=1){f=f+f/c}else{f=100}}$(NTDanGuanPlugin.dgwrapper).eq(a).find(NTDanGuanPlugin.curMatch).find(".dgnums").val(f);$(d).toggleClass("dgcur");NTDanGuanPlugin.countMoney(a)});$(NTDanGuanPlugin.dgwrapper).eq(a).find(NTDanGuanPlugin.betchange).on("click",function(h){var d=h.target;var f=d.className;var g=$(d).parent().find(".dgnums").val();var c=+$(NTDanGuanPlugin.dgwrapper).eq(a).find(NTDanGuanPlugin.curMatch).find(".dgbet .dgcur").length*2;switch(f){case"dgminus":if(g>c){g=g-c}else{g=c}break;case"dgadd":g=+g+c;break}$(d).parent().find(".dgnums").val(g);NTDanGuanPlugin.countMoney(a)});$(NTDanGuanPlugin.dgwrapper).eq(a).find(NTDanGuanPlugin.betnums).on("change",function(g){var d=g.target;var f=$(d).val();var c=+$(NTDanGuanPlugin.dgwrapper).eq(a).find(NTDanGuanPlugin.curMatch).find(".dgbet .dgcur").length*2;if(f==0){$(d).val(c)}else{if(f%2>0){$(d).val(+f+1)}}NTDanGuanPlugin.countMoney(a)});if(b.Match!=null){$("#zqbuy"+b.Match.Issue).on("click",function(l){var n=l.target;var d=NTDanGuanPlugin.baseUrl+"/jingzu.html?ct=1&p=1&bet=1&gameCode="+NTDanGuanPlugin.switchGameCode(b.GameName);var f=$(NTDanGuanPlugin.dgwrapper).eq(a).find(NTDanGuanPlugin.curMatch).find(".dgbet .dgcur");if(b.GameName=="Sporttrey312"){var c="";for(var h=0;h<f.length;h++){c+=f[h].dataset.index+","}d+="&codes="+b.Match.Issue+":"+c.substring(0,c.length-1)}else{var k=0;var g=0;var j=0;for(var h=0;h<f.length;h++){switch($(f[h]).parent().parent().attr("class")){case"dgwin":k=1;break;case"dgdraws":g=1;break;case"dgdefeat":j=1;break}}d+="&codes="+b.Match.Issue+":"+k+","+g+","+j}d+="&sourceid="+n.dataset.source;var m=($(NTDanGuanPlugin.dgwrapper).eq(a).find(NTDanGuanPlugin.curMatch).find(".dgnums").val())/(2*f.length);d+="&beishu="+m;if(m<=0||f.length<=0){alert("请至少选择一个赛果")}else{window.location.href=d}})}if(b.nbaMatch!=null){$("#lqbuy"+b.nbaMatch.Issue).on("click",function(k){var m=k.target;var d=NTDanGuanPlugin.baseUrl+"/jinglan.html?ct=1&p=1&bet=1&gameCode="+NTDanGuanPlugin.switchGameCode(b.nbaGameName);var f=$(NTDanGuanPlugin.dgwrapper).eq(a).find(NTDanGuanPlugin.curMatch).find(".dgbet .dgcur");if(b.nbaGameName=="Sporttrey318"){var c="";for(var g=0;g<f.length;g++){c+=f[g].dataset.index+","}d+="&codes="+b.nbaMatch.Issue+":"+c.substring(0,c.length-1)}else{var j=0;var h=0;for(var g=0;g<f.length;g++){switch($(f[g]).parent().parent().attr("class")){case"dgwin":j=1;break;case"dgdefeat":h=1;break}}d+="&codes="+b.nbaMatch.Issue+":"+j+","+h}d+="&sourceid="+m.dataset.source;var l=($(NTDanGuanPlugin.dgwrapper).eq(a).find(NTDanGuanPlugin.curMatch).find(".dgnums").val())/(2*f.length);d+="&beishu="+l;if(l<=0||f.length<=0){alert("请至少选择一个赛果")}else{window.location.href=d}})}}};NTDanGuanPlugin.init();